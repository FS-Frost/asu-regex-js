function h(a){return parseInt(a,16)}function $(a){return Math.floor(a).toString(16).padStart(2,"0").toUpperCase()}function Nt(a,t,n){const r=a>t;let e=t,c=a;if(r)e=a,c=t;const s=(e-c)/n;let d=c;const p=[c];for(let b=1;b<n;b++)d+=s,p.push(d);if(p[n-1]=e,r)p.reverse();return p}function It(a,t){t=Math.floor(t);const n=`(-?\\d+.?\\d{1,${t}})`,r=new RegExp(n),e=a.toString().match(r);if(!e||e.length===0)return a;return Number(e[0])}var vn=/^(\(.*\)|\\?.)$/,I=(a)=>{const t=a.toString();return vn.test(t)?t:`(?:${t})`},xn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Cn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,i=(a)=>{const t=(n)=>i(`(?<${n}>${`${a}`.replace(xn,"$1$2")})`);return{toString:()=>a.toString(),and:Object.assign((...n)=>i(`${a}${f(...n)}`),{referenceTo:(n)=>i(`${a}\\k<${n}>`)}),or:(...n)=>i(`(?:${a}|${f(...n)})`),after:(...n)=>i(`(?<=${f(...n)})${a}`),before:(...n)=>i(`${a}(?=${f(...n)})`),notAfter:(...n)=>i(`(?<!${f(...n)})${a}`),notBefore:(...n)=>i(`${a}(?!${f(...n)})`),times:Object.assign((n)=>i(`${I(a)}{${n}}`),{any:()=>i(`${I(a)}*`),atLeast:(n)=>i(`${I(a)}{${n},}`),atMost:(n)=>i(`${I(a)}{0,${n}}`),between:(n,r)=>i(`${I(a)}{${n},${r}}`)}),optionally:()=>i(`${I(a)}?`),as:t,groupedAs:t,grouped:()=>i(`${a}`.replace(Cn,"($1$3)$2")),at:{lineStart:()=>i(`^${a}`),lineEnd:()=>i(`${a}\$`)}}},Nn=/[.*+?^${}()|[\]\\/]/g;var x=(a)=>i(`[^${a.replace(/[-\\^\]]/g,"\\$&")}]`),B=(...a)=>i(`(?:${a.map((t)=>f(t)).join("|")})`),A=i("."),In=i("\\b\\w+\\b"),yn=i("\\w"),$n=i("\\b"),N=i("\\d"),_n=i("\\s"),S=Object.assign(i("[a-zA-Z]"),{lowercase:i("[a-z]"),uppercase:i("[A-Z]")}),Wn=i("\\t"),kn=i("\\n"),Fn=i("\\r"),Bn={word:i("\\W+"),wordChar:i("\\W"),wordBoundary:i("\\B"),digit:i("\\D"),whitespace:i("\\S"),letter:Object.assign(i("[^a-zA-Z]"),{lowercase:i("[^a-z]"),uppercase:i("[^A-Z]")}),tab:i("[^\\t]"),linefeed:i("[^\\n]"),carriageReturn:i("[^\\r]")};var f=(...a)=>i(a.map((t)=>typeof t==="string"?t.replace(Nn,"\\$&"):t).join("")),T=(...a)=>i(`${I(f(...a))}+`);var v=(...a)=>{const t=a.length>1&&(Array.isArray(a[a.length-1])||a[a.length-1]instanceof Set)?a.pop():void 0;return new RegExp(f(...a).toString(),[...t||""].join(""))};var R=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,X=/^[^\\]+/g,z=T(N).and(f(":")).and(N.times(2)).and(f(":")).and(N.times(2)).and(f(".")).and(N.times(2)),An=B("Dialogue","Comment").groupedAs("type").and(f(": ")).and(T(N).optionally().groupedAs("layer")).and(f(",")).and(z.optionally().groupedAs("start")).and(f(",")).and(z.optionally().groupedAs("end")).and(f(",")).and(T(x(",").optionally()).groupedAs("style")).and(f(",")).and(T(x(",")).optionally().groupedAs("actor")).and(f(",")).and(T(N).optionally().groupedAs("marginLeft")).and(f(",")).and(T(N).optionally().groupedAs("marginRight")).and(f(",")).and(T(N).optionally().groupedAs("marginVertical")).and(f(",")).and(T(x(",")).optionally().groupedAs("effect")).and(f(",")).and(T(A).optionally().groupedAs("content")),Y=v(An),Sn=f("-").optionally().and(T(N)),g=Sn.and(f(".").and(T(N)).optionally()),Kn=f("\\").and("a").and(g),C=S.or(N).times(2),w=f("&H").and(C.groupedAs("color_bgr_blue")).and(C.groupedAs("color_bgr_green")).and(C.groupedAs("color_bgr_red")).and(f("&")),G=f("\\c").and(w),q=f("\\1c").and(f("&H")).and(C.groupedAs("color1_bgr_blue")).and(C.groupedAs("color1_bgr_green")).and(C.groupedAs("color1_bgr_red")).and(f("&")),j=f("\\2c").and(f("&H")).and(C.groupedAs("color2_bgr_blue")).and(C.groupedAs("color2_bgr_green")).and(C.groupedAs("color2_bgr_red")).and(f("&")),Q=f("\\3c").and(f("&H")).and(C.groupedAs("color3_bgr_blue")).and(C.groupedAs("color3_bgr_green")).and(C.groupedAs("color3_bgr_red")).and(f("&")),E=f("\\4c").and(f("&H")).and(C.groupedAs("color4_bgr_blue")).and(C.groupedAs("color4_bgr_green")).and(C.groupedAs("color4_bgr_red")).and(f("&")),Z=v(w),D=v(G),J=v(q),M=v(j),O=v(Q),H=v(E),Pn=f("\\").and("alpha").and(T(x("\\"))),Un=f("\\").and("1a").and(T(x("\\"))),Ln=f("\\").and("2a").and(T(x("\\"))),zn=f("\\").and("3a").and(T(x("\\"))),Rn=f("\\").and("4a").and(T(x("\\"))),Xn=f("\\").and("k").and(g),Yn=f("\\").and("K").and(g),wn=f("\\").and("kf").and(g),Gn=f("\\").and("ko").and(g),qn=f("\\").and("q").and(g),jn=f("\\").and("s").and(g),Qn=f("\\").and("u").and(g),En=f("\\").and("r").and(T(x("\\"))),Zn=f("\\").and("fe").and(g),Dn=f("\\").and("fn").and(T(x("\\"))),Jn=f("\\").and("p").and(g),Mn=f("\\").and("pbo").and(g),On=f("\\").and("an").and(g),Hn=f("\\").and("b").and(g),Vn=f("\\").and("be").and(g),nt=f("\\").and("blur").and(g),tt=f("\\").and("bord").and(g),et=f("\\").and("xbord").and(g),at=f("\\").and("ybord").and(g),rt=f("\\").and("shad").and(g),ut=f("\\").and("xshad").and(g),ot=f("\\").and("yshad").and(g),st=f("\\").and("fax").and(g),ft=f("\\").and("fay").and(g),mt=f("\\").and("fscx").and(g),ct=f("\\").and("fscy").and(g),gt=f("\\").and("fsp").and(g),lt=f("\\").and("fr").and(g),it=f("\\").and("frx").and(g),pt=f("\\").and("fry").and(g),dt=f("\\").and("frz").and(g),bt=f("\\").and("i").and(f("1").or("0")),Tt=f("\\").and("fs").and(g),V=f("\\").and("pos").and(f("(")).and(g.groupedAs("pos_x")).and(f(",")).and(g.groupedAs("pos_y")).and(f(")")),nn=v(V),tn=f("\\").and("org").and(f("(")).and(g.groupedAs("org_x")).and(f(",")).and(g.groupedAs("org_y")).and(f(")")),en=v(tn),an=f("\\").and("fad").and(f("(")).and(g.groupedAs("in")).and(f(",")).and(g.groupedAs("out")).and(f(")")),rn=v(an),un=f("\\").and("fade").and(f("(")).and(g.groupedAs("fade_alpha1")).and(f(",")).and(g.groupedAs("fade_alpha2")).and(f(",")).and(g.groupedAs("fade_alpha3")).and(f(",")).and(g.groupedAs("fade_t1")).and(f(",")).and(g.groupedAs("fade_t2")).and(f(",")).and(g.groupedAs("fade_t3")).and(f(",")).and(g.groupedAs("fade_t4")).and(f(")")),on=v(un),ht=f(",").and(g.groupedAs("move_t1")).and(f(",")).and(g.groupedAs("move_t2")).optionally(),sn=f("\\").and("move").and(f("(")).and(g.groupedAs("move_x1")).and(f(",")).and(g.groupedAs("move_y1")).and(f(",")).and(g.groupedAs("move_x2")).and(f(",")).and(g.groupedAs("move_y2")).and(ht).and(f(")")),fn=v(sn),mn=f("\\").and("clip").and(f("(")).and(T(x(")")).groupedAs("clip_args")).and(f(")")),cn=v(mn),gn=f("\\").and("iclip").and(f("(")).and(T(x(")")).groupedAs("iclip_args")).and(f(")")),ln=v(gn),vt=f("\\").and(T(x("\\"))),pn=Vn.or(Pn).or(et).or(at).or(ut).or(ot).or(gn).or(sn).or(nt).or(tt).or(rt).or(mt).or(ct).or(un).or(mn).or(gt).or(V).or(tn).or(an).or(Mn).or(it).or(pt).or(dt).or(st).or(ft).or(Gn).or(wn).or(lt).or(Tt).or(Zn).or(Dn).or(On).or(q).or(j).or(Q).or(E).or(Un).or(Ln).or(zn).or(Rn).or(G).or(qn).or(Qn).or(jn).or(Jn).or(En).or(bt).or(Hn).or(Kn).or(Xn).or(Yn).or(vt),xt=f("\\").at.lineStart().and("t").and(f("(")).and(g.groupedAs("arg1").and(f(",")).optionally()).and(g.groupedAs("arg2").and(f(",")).optionally()).and(g.groupedAs("arg3").and(f(",")).optionally()).and(T(pn).groupedAs("tags")).and(f(")")),dn=v(pn),K=v(xt);function bn(a){const t=Math.floor(a/3600),n=Math.floor((a/3600-t)*60);return a=a-t*3600-n*60,{hours:t,minutes:n,seconds:a}}function P(a){const t=/(?<h>\d+):(?<m>[0-9]{1,2}?):(?<s>[0-9]{1,2}(?:\.[0-9]{1,2})?)/,n=a.match(t);if(!n||n.length===0)return null;const r=Math.floor(Number(n.groups?.h??"0")),e=Math.floor(Number(n.groups?.m??"0")),c=Number(n.groups?.s??"0"),o={hours:r,minutes:e,seconds:c};return U(o),o}function U(a){if(a.seconds>=60)a.seconds-=60,a.minutes++;if(a.minutes>=60)a.minutes-=60,a.hours++;if(a.hours>=9)a.hours=9,a.minutes=59,a.seconds=59.99}function L(a){U(a);const t=a.hours.toFixed(0),n=a.minutes.toFixed(0).padStart("00".length,"0"),r=a.seconds.toFixed(2).padStart("00.00".length,"0");return`${t}:${n}:${r}`}function _(a){return U(a),a.hours*3600+a.minutes*60+a.seconds}function Yt(a,t){const n=_(a),r=_(t),e=n+r;return bn(e)}function wt(a,t){const n=_(a),r=_(t),e=n-r;return bn(e)}function y(a,t){const n=a.substring(1),r=a.match(K);if(r&&r.length>0)return Ct(a,t,n,r);const e=a.match(X);if(e&&e.length>0){const o=e[0];if(t.push({name:u.text,value:o}),a=a.substring(o.length),a.length>0)y(a,t);return t}const c=a.match(dn);if(!c||c.length==0)return t;if(n.startsWith(u.move)){const o=c[0].match(fn)?.groups,s=Number(o?.move_x1??"0"),d=Number(o?.move_y1??"0"),p=Number(o?.move_x2??"0"),b=Number(o?.move_y2??"0"),W=o?.move_t1?Number(o.move_t1):null,k=o?.move_t2?Number(o.move_t2):null,F={name:u.move,x1:s,y1:d,x2:p,y2:b,t1:W,t2:k};t.push(F)}else if(n.startsWith(u.alpha)){const o=c[0].substring(1+u.alpha.length),s={name:u.alpha,value:o};t.push(s)}else if(n.startsWith(u.xbord)){const o=Number(c[0].substring(1+u.xbord.length)),s={name:u.xbord,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.ybord)){const o=Number(c[0].substring(1+u.ybord.length)),s={name:u.ybord,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.xshad)){const o=Number(c[0].substring(1+u.xshad.length)),s={name:u.xshad,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.yshad)){const o=Number(c[0].substring(1+u.yshad.length)),s={name:u.yshad,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.iclip)){const s=c[0].match(ln)?.groups?.iclip_args??"",d={name:u.iclip,drawCommands:s};t.push(d)}else if(n.startsWith(u.blur)){const o=Number(c[0].substring(1+u.blur.length)),s={name:u.blur,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.bord)){const o=Number(c[0].substring(1+u.bord.length)),s={name:u.bord,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.shad)){const o=Number(c[0].substring(1+u.shad.length)),s={name:u.shad,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fscx)){const o=Number(c[0].substring(1+u.fscx.length)),s={name:u.fscx,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fscy)){const o=Number(c[0].substring(1+u.fscy.length)),s={name:u.fscy,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fade)){const o=c[0].match(on)?.groups,s=Number(o?.fade_alpha1??"0"),d=Number(o?.fade_alpha2??"0"),p=Number(o?.fade_alpha3??"0"),b=Number(o?.fade_t1??"0"),W=Number(o?.fade_t2??"0"),k=Number(o?.fade_t3??"0"),F=Number(o?.fade_t4??"0"),hn={name:u.fade,alpha1:s,alpha2:d,alpha3:p,t1:b,t2:W,t3:k,t4:F};t.push(hn)}else if(n.startsWith(u.clip)){const s=c[0].match(cn)?.groups?.clip_args??"",d={name:u.clip,drawCommands:s};t.push(d)}else if(n.startsWith(u.fsp)){const o=Number(c[0].substring(1+u.fsp.length)),s={name:u.fsp,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.pos)){const o=c[0].match(nn)?.groups,s=Number(o?.pos_x??"0"),d=Number(o?.pos_y??"0"),p={name:u.pos,x:s,y:d};t.push(p)}else if(n.startsWith(u.org)){const o=c[0].match(en)?.groups,s=Number(o?.org_x??"0"),d=Number(o?.org_y??"0"),p={name:u.org,x:s,y:d};t.push(p)}else if(n.startsWith(u.fad)){const o=c[0].match(rn)?.groups,s=Number(o?.in??"0"),d=Number(o?.out??"0"),p={name:u.fad,in:s,out:d};t.push(p)}else if(n.startsWith(u.frx)){const o=Number(c[0].substring(1+u.frx.length)),s={name:u.frx,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fry)){const o=Number(c[0].substring(1+u.fry.length)),s={name:u.fry,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.frz)){const o=Number(c[0].substring(1+u.frz.length)),s={name:u.frz,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fax)){const o=Number(c[0].substring(1+u.fax.length)),s={name:u.fax,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fay)){const o=Number(c[0].substring(1+u.fay.length)),s={name:u.fay,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.pbo)){const o=Number(c[0].substring(1+u.pbo.length)),s={name:u.pbo,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fe)){const o=Number(c[0].substring(1+u.fe.length)),s={name:u.fe,encodingId:Number(o)};t.push(s)}else if(n.startsWith(u.fn)){const o=c[0].substring(1+u.fn.length),s={name:u.fn,font:o};t.push(s)}else if(n.startsWith(u.an)){const o=Number(c[0].substring(1+u.be.length)),s={name:u.an,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.be)){const o=Number(c[0].substring(1+u.be.length)),s={name:u.be,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fr)){const o=Number(c[0].substring(1+u.fr.length)),s={name:u.fr,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.fs)){const o=Number(c[0].substring(1+u.fs.length)),s={name:u.fs,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.ko)){const o=Number(c[0].substring(1+u.ko.length)),s={name:u.ko,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.kf)){const o=Number(c[0].substring(1+u.kf.length)),s={name:u.kf,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.color1)){const o=c[0].match(J)?.groups,s=Number(h(o?.color1_bgr_blue??"0")),d=Number(h(o?.color1_bgr_green??"0")),p=Number(h(o?.color1_bgr_red??"0")),b={name:u.color1,blue:s,green:d,red:p};t.push(b)}else if(n.startsWith(u.color2)){const o=c[0].match(M)?.groups,s=Number(h(o?.color2_bgr_blue??"0")),d=Number(h(o?.color2_bgr_green??"0")),p=Number(h(o?.color2_bgr_red??"0")),b={name:u.color2,blue:s,green:d,red:p};t.push(b)}else if(n.startsWith(u.color3)){const o=c[0].match(O)?.groups,s=Number(h(o?.color3_bgr_blue??"0")),d=Number(h(o?.color3_bgr_green??"0")),p=Number(h(o?.color3_bgr_red??"0")),b={name:u.color3,blue:s,green:d,red:p};t.push(b)}else if(n.startsWith(u.color4)){const o=c[0].match(H)?.groups,s=Number(h(o?.color4_bgr_blue??"0")),d=Number(h(o?.color4_bgr_green??"0")),p=Number(h(o?.color4_bgr_red??"0")),b={name:u.color4,blue:s,green:d,red:p};t.push(b)}else if(n.startsWith(u.alpha1)){const o=c[0].substring(1+u.alpha1.length),s={name:u.alpha1,value:o};t.push(s)}else if(n.startsWith(u.alpha2)){const o=c[0].substring(1+u.alpha2.length),s={name:u.alpha2,value:o};t.push(s)}else if(n.startsWith(u.alpha3)){const o=c[0].substring(1+u.alpha3.length),s={name:u.alpha3,value:o};t.push(s)}else if(n.startsWith(u.alpha4)){const o=c[0].substring(1+u.alpha4.length),s={name:u.alpha4,value:o};t.push(s)}else if(n.startsWith(u.kLowerCase)){const o=Number(c[0].substring(1+u.kLowerCase.length)),s={name:u.kLowerCase,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.kUpperCase)){const o=Number(c[0].substring(1+u.kUpperCase.length)),s={name:u.kUpperCase,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.q)){const o=Number(c[0].substring(1+u.q.length)),s={name:u.q,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.s)){const o=Number(c[0].substring(1+u.s.length)),s={name:u.s,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.u)){const o=Number(c[0].substring(1+u.u.length)),s={name:u.u,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.r)){const o=c[0].substring(1+u.r.length),s={name:u.r,style:o};t.push(s)}else if(n.startsWith(u.p)){const o=Number(c[0].substring(1+u.p.length)),s={name:u.p,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.i)){const o=Number(c[0].substring(1+u.i.length)),s={name:u.i,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.color)){const o=c[0].match(D)?.groups,s=Number(h(o?.color_bgr_blue??"0")),d=Number(h(o?.color_bgr_green??"0")),p=Number(h(o?.color_bgr_red??"0")),b={name:u.color,blue:s,green:d,red:p};t.push(b)}else if(n.startsWith(u.b)){const o=Number(c[0].substring(1+u.b.length)),s={name:u.b,value:Number.isNaN(o)?0:o};t.push(s)}else if(n.startsWith(u.a)){const o=Number(c[0].substring(1+u.a.length)),s={name:u.a,value:Number.isNaN(o)?0:o};t.push(s)}else{const o=c[0],s={name:u.unknown,value:o};t.push(s)}if(a=a.substring(c[0].length),a.length>0)y(a,t);return t}var Ct=function(a,t,n,r){if(n.startsWith(u.t)){const e=r[0].match(K)?.groups,c=e?.tags??"",o=[];y(c,o);const s=e?.arg1?Number(e.arg1):null,d=e?.arg2?Number(e.arg2):null,p=e?.arg3?Number(e.arg3):null,b={name:u.t,accel:null,t1:null,t2:null,tags:o};if(s!==null&&d!==null&&p!==null)b.t1=s,b.t2=d,b.accel=p;else if(s!==null&&d!==null&&p===null)b.t1=s,b.t2=d,b.accel=null;else if(s!==null)b.accel=s;t.push(b)}if(a=a.substring(r[0].length),a.length>0)y(a,t);return t};function Zt(a){const t=[],n=a.matchAll(R);for(let r of n){if(r.groups?.fx){const e=r.groups.fx.substring(1,r.groups.fx.length-1),c=[];y(e,c),t.push({name:"effect",tags:c});continue}if(r.groups?.txt){t.push({name:"text",value:r.groups?.txt});continue}}return t}function Tn(a){let t="";for(let n of a.tags)switch(n.name){case u.t:const r={name:"effect",tags:n.tags},e=Tn(r);if(n.t1!==null&&n.t2!==null&&n.accel!==null)t+=`\\t(${n.t1},${n.t2},${n.accel},${e})`;else if(n.t1!==null&&n.t2!==null&&n.accel===null)t+=`\\t(${n.t1},${n.t2},${e})`;else if(n.accel!==null)t+=`\\t(${n.accel},${e})`;else t+=`\\t(${e})`;break;case u.pos:case u.org:t+=`\\${n.name}(${n.x},${n.y})`;break;case u.move:if(t+=`\\move(${n.x1},${n.y1},${n.x2},${n.y2}`,n.t1!=null&&n.t2!=null)t+=`,${n.t1},${n.t2}`;t+=")";break;case u.clip:case u.iclip:t+=`\\${n.name}(${n.drawCommands})`;break;case u.fad:t+=`\\fad(${n.in},${n.out})`;break;case u.fade:t+=`\\fade(${n.alpha1},${n.alpha2},${n.alpha3},${n.t1},${n.t2},${n.t3},${n.t4})`;break;case u.fe:t+=`\\fe${n.encodingId}`;break;case u.fn:t+=`\\fn${n.font}`;break;case u.r:t+=`\\r${n.style}`;break;case u.color:case u.color1:case u.color2:case u.color3:case u.color4:const c=$(n.blue),o=$(n.green),s=$(n.red);t+=`\\${n.name}&H${c}${o}${s}&`;break;case u.text:case u.unknown:t+=n.value;break;default:t+=`\\${n.name}${n.value}`;break}return t}function Dt(a){let t="";for(let n of a){if(n.name=="text"){t+=n.value;continue}t+="{"+Tn(n)+"}"}return t}function Jt(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.a,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Mt(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.b,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ot(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.color,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ht(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.color1,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Vt(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.color2,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ne(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.color3,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function te(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.color4,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ee(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.alpha,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ae(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.alpha1,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function re(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.alpha2,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ue(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.alpha3,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function oe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.alpha4,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function se(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.an,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function fe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.be,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function me(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.blur,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ce(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.bord,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ge(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.xbord,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function le(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.ybord,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ie(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.shad,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function pe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.xshad,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function de(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.yshad,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function be(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fr,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Te(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.frx,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function he(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fry,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ve(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.frz,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function xe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fax,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ce(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fay,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ne(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.p,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ie(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.pbo,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ye(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.q,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function $e(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.s,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function _e(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.u,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function We(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.r,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ke(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fe,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Fe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fn,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Be(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fscx,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ae(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fscy,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Se(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fsp,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ke(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.kLowerCase,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Pe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.kUpperCase,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ue(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.ko,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Le(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.kf,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function ze(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.i,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Re(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fs,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Xe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.pos,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ye(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.org,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function we(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fad,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ge(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.fade,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function qe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.clip,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function je(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.iclip,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Qe(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.move,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ee(a){const t=a.find((e)=>e.name=="effect");if(t?.name!="effect")return null;const n=u.t,r=t.tags.find((e)=>e.name==n);if(r?.name!=n)return null;return r}function Ze(a,t){const n={name:u.a,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function De(a,t){const n={name:u.an,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Je(a,t){const n={name:u.b,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Me(a,t,n,r){const e={name:u.color,blue:t,green:n,red:r},[c,o]=l(a,e.name,e);if(!c)o.blue=t,o.green=n,o.red=r;return o}function Oe(a,t,n,r){const e={name:u.color1,blue:t,green:n,red:r},[c,o]=l(a,e.name,e);if(!c)o.blue=t,o.green=n,o.red=r;return o}function He(a,t,n,r){const e={name:u.color2,blue:t,green:n,red:r},[c,o]=l(a,e.name,e);if(!c)o.blue=t,o.green=n,o.red=r;return o}function Ve(a,t,n,r){const e={name:u.color3,blue:t,green:n,red:r},[c,o]=l(a,e.name,e);if(!c)o.blue=t,o.green=n,o.red=r;return o}function na(a,t,n,r){const e={name:u.color4,blue:t,green:n,red:r},[c,o]=l(a,e.name,e);if(!c)o.blue=t,o.green=n,o.red=r;return o}function ta(a,t){const n={name:u.alpha,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ea(a,t){const n={name:u.alpha1,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function aa(a,t){const n={name:u.alpha2,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ra(a,t){const n={name:u.alpha3,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ua(a,t){const n={name:u.alpha4,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function oa(a,t){const n={name:u.blur,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function sa(a,t){const n={name:u.bord,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function fa(a,t){const n={name:u.xbord,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ma(a,t){const n={name:u.ybord,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ca(a,t){const n={name:u.fax,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ga(a,t){const n={name:u.fay,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function la(a,t){const n={name:u.fscx,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ia(a,t){const n={name:u.fscy,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function pa(a,t){const n={name:u.fsp,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function da(a,t){const n={name:u.fe,encodingId:t},[r,e]=l(a,n.name,n);if(!r)e.encodingId=t;return e}function ba(a,t){const n={name:u.fn,font:t},[r,e]=l(a,n.name,n);if(!r)e.font=t;return e}function Ta(a,t){const n={name:u.kLowerCase,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ha(a,t){const n={name:u.kUpperCase,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function va(a,t){const n={name:u.kf,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function xa(a,t){const n={name:u.ko,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Ca(a,t){const n={name:u.p,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Na(a,t){const n={name:u.pbo,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Ia(a,t){const n={name:u.q,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ya(a,t){const n={name:u.s,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function $a(a,t){const n={name:u.shad,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function _a(a,t){const n={name:u.xshad,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Wa(a,t){const n={name:u.yshad,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function ka(a,t){const n={name:u.u,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Fa(a,t){const n={name:u.be,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Ba(a,t){const n={name:u.fs,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Aa(a,t){const n={name:u.fr,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Sa(a,t){const n={name:u.frx,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Ka(a,t){const n={name:u.fry,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Pa(a,t){const n={name:u.frz,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function Ua(a,t){const n={name:u.i,value:t},[r,e]=l(a,n.name,n);if(!r)e.value=t;return e}function La(a,t){const n={name:u.r,style:t},[r,e]=l(a,n.name,n);if(!r)e.style=t;return e}function za(a,t,n){const r={name:u.pos,x:t,y:n},[e,c]=l(a,r.name,r);if(!e)c.x=t,c.y=n;return c}function Ra(a,t,n){const r={name:u.org,x:t,y:n},[e,c]=l(a,r.name,r);if(!e)c.x=t,c.y=n;return c}function Xa(a,t,n){const r={name:u.fad,in:t,out:n},[e,c]=l(a,r.name,r);if(!e)c.in=t,c.out=n;return c}function Ya(a,t,n,r,e,c,o,s){const d={name:u.fade,alpha1:t,alpha2:n,alpha3:r,t1:e,t2:c,t3:o,t4:s},[p,b]=l(a,d.name,d);if(!p)b.alpha1=t,b.alpha2=n,b.alpha3=r,b.t1=e,b.t2=c,b.t3=o,b.t4=s;return b}function wa(a,t){const n={name:u.clip,drawCommands:t},[r,e]=l(a,n.name,n);if(!r)e.drawCommands=t;return e}function Ga(a,t){const n={name:u.iclip,drawCommands:t},[r,e]=l(a,n.name,n);if(!r)e.drawCommands=t;return e}function qa(a,t,n,r,e,c=null,o=null){const s={name:u.move,x1:t,y1:n,x2:r,y2:e,t1:c,t2:o},[d,p]=l(a,s.name,s);if(!d)p.x1=t,p.y1=n,p.x2=r,p.y2=e,p.t1=c,p.t2=o;return p}function ja(a,t,n=null,r=null,e=null){const c={name:u.t,t1:r,t2:e,accel:n,tags:t},[o,s]=l(a,c.name,c);if(!o)s.t1=r,s.t2=e,s.accel=n,s.tags=t;return s}function Qa(a){return[{name:"effect",tags:a}]}function Ea(a){const t=a.find((n)=>n.name==="effect");if(t==null||t.name!="effect")return[];return t.tags}var l=function(a,t,n){const r=a.find((c)=>c.name=="effect");if(r?.name!="effect")return a.unshift({name:"effect",tags:[n]}),[!0,n];const e=r.tags.find((c)=>c.name==t);if(e?.name!=t)return r.tags.push(n),[!0,n];return[!1,e]};function Za(a,t){const n=a.find((e)=>e.name=="effect");if(n?.name!="effect")return;const r=n.tags.findIndex((e)=>e.name===t);if(r<0)return;n.tags.splice(r,1)}function Da(a){const t=a.match(Y);if(t==null)return null;const n=t.groups,r=P(n?.start??"");if(r==null)return null;const e=P(n?.end??"");if(e==null)return null;return{type:n?.type??"",layer:Number(n?.layer??"0"),start:r,end:e,style:n?.style??"",actor:n?.actor??"",marginLeft:Number(n?.marginLeft??"0"),marginRight:Number(n?.marginRight??"0"),marginVertical:Number(n?.marginVertical??"0"),effect:n?.effect??"",content:n?.content??""}}function Ja(a){let t=a.type;return t+=": ",t+=a.layer,t+=",",t+=L(a.start),t+=",",t+=L(a.end),t+=",",t+=a.style,t+=",",t+=a.actor,t+=",",t+=a.marginLeft,t+=",",t+=a.marginRight,t+=",",t+=a.marginVertical,t+=",",t+=a.effect,t+=",",t+=a.content,t}function Ma(a){const t=a.match(Z);if(t==null)return null;const n=t.groups;return{blue:h(n?.color_bgr_blue??""),green:h(n?.color_bgr_green??""),red:h(n?.color_bgr_red??"")}}var u;(function(m){m["a"]="a";m["alpha"]="alpha";m["alpha1"]="1a";m["alpha2"]="2a";m["alpha3"]="3a";m["alpha4"]="4a";m["an"]="an";m["b"]="b";m["be"]="be";m["blur"]="blur";m["bord"]="bord";m["clip"]="clip";m["color"]="c";m["color1"]="1c";m["color2"]="2c";m["color3"]="3c";m["color4"]="4c";m["fad"]="fad";m["fade"]="fade";m["fax"]="fax";m["fay"]="fay";m["fe"]="fe";m["fn"]="fn";m["fr"]="fr";m["frx"]="frx";m["fry"]="fry";m["frz"]="frz";m["fs"]="fs";m["fscx"]="fscx";m["fscy"]="fscy";m["fsp"]="fsp";m["i"]="i";m["iclip"]="iclip";m["kLowerCase"]="k";m["kUpperCase"]="K";m["kf"]="kf";m["ko"]="ko";m["move"]="move";m["org"]="org";m["p"]="p";m["pbo"]="pbo";m["pos"]="pos";m["q"]="q";m["r"]="r";m["s"]="s";m["shad"]="shad";m["t"]="t";m["text"]="text";m["u"]="u";m["unknown"]="unknown";m["xbord"]="xbord";m["xshad"]="xshad";m["ybord"]="ybord";m["yshad"]="yshad"})(u||(u={}));export{It as truncate,L as timeToString,_ as timeToSeconds,Qa as tagsToItems,Yt as sumTimes,wt as subtractTimes,Wa as setYshad,ma as setYbord,_a as setXshad,fa as setXbord,ka as setU,ja as setT,$a as setShad,ya as setS,La as setR,Ia as setQ,za as setPos,Na as setPbo,Ca as setP,Ra as setOrg,qa as setMove,xa as setKo,va as setKf,ha as setKUpperCase,Ta as setKLowerCase,Ga as setIclip,Ua as setI,pa as setFsp,ia as setFscy,la as setFscx,Ba as setFs,Pa as setFrz,Ka as setFry,Sa as setFrx,Aa as setFr,ba as setFn,da as setFe,ga as setFay,ca as setFax,Ya as setFade,Xa as setFad,na as setColor4,Ve as setColor3,He as setColor2,Oe as setColor1,Me as setColor,wa as setClip,sa as setBord,oa as setBlur,Fa as setBe,Je as setB,De as setAn,ua as setAlpha4,ra as setAlpha3,aa as setAlpha2,ea as setAlpha1,ta as setAlpha,Ze as setA,bn as secondsToTime,Za as removeTag,P as parseTime,y as parseTags,Da as parseLine,Zt as parseContent,Ma as parseColorBGR,$ as numberToHex,Ja as lineToString,Ea as itemsToTags,Nt as interpolate,h as hexToNumber,de as findYshad,le as findYbord,pe as findXshad,ge as findXbord,_e as findU,Ee as findT,ie as findShad,$e as findS,We as findR,ye as findQ,Xe as findPos,Ie as findPbo,Ne as findP,Ye as findOrg,Qe as findMove,Ue as findKo,Le as findKf,Pe as findKUpperCase,Ke as findKLowerCase,je as findIclip,ze as findI,Se as findFsp,Ae as findFscy,Be as findFscx,Re as findFs,ve as findFrz,he as findFry,Te as findFrx,be as findFr,Fe as findFn,ke as findFe,Ce as findFay,xe as findFax,Ge as findFade,we as findFad,te as findColor4,ne as findColor3,Vt as findColor2,Ht as findColor1,Ot as findColor,qe as findClip,ce as findBord,me as findBlur,fe as findBe,Mt as findB,se as findAn,oe as findAlpha4,ue as findAlpha3,re as findAlpha2,ae as findAlpha1,ee as findAlpha,Jt as findA,Dt as contentsToString,Tn as contentEffectToString,U as adjustTimeOverplus,u as TagName};

//# debugId=A6747694287BEB5564756e2164756e21
