// @bun
function K(Z){return parseInt(Z,16)}function F(Z){return Math.floor(Z).toString(16).padStart(2,"0").toUpperCase()}function J_(Z,_,$){const A=Z>_;let j=_,z=Z;if(A)j=Z,z=_;const Y=(j-z)/$;let G=z;const X=[z];for(let E=1;E<$;E++){if(G+=Y,G>j)G=j;X.push(G)}if(X[$-1]=j,A)X.reverse();return X}var L$=/^(\(.*\)|\\?.)$/,b=(Z)=>{const _=Z.toString();return L$.test(_)?_:`(?:${_})`},J$=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Q$=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,J=(Z)=>{const _=($)=>J(`(?<${$}>${`${Z}`.replace(J$,"$1$2")})`);return{toString:()=>Z.toString(),and:Object.assign((...$)=>J(`${Z}${W(...$)}`),{referenceTo:($)=>J(`${Z}\\k<${$}>`)}),or:(...$)=>J(`(?:${Z}|${W(...$)})`),after:(...$)=>J(`(?<=${W(...$)})${Z}`),before:(...$)=>J(`${Z}(?=${W(...$)})`),notAfter:(...$)=>J(`(?<!${W(...$)})${Z}`),notBefore:(...$)=>J(`${Z}(?!${W(...$)})`),times:Object.assign(($)=>J(`${b(Z)}{${$}}`),{any:()=>J(`${b(Z)}*`),atLeast:($)=>J(`${b(Z)}{${$},}`),atMost:($)=>J(`${b(Z)}{0,${$}}`),between:($,A)=>J(`${b(Z)}{${$},${A}}`)}),optionally:()=>J(`${b(Z)}?`),as:_,groupedAs:_,grouped:()=>J(`${Z}`.replace(Q$,"($1$3)$2")),at:{lineStart:()=>J(`^${Z}`),lineEnd:()=>J(`${Z}\$`)}}},Y$=/[.*+?^${}()|[\]\\/]/g;var I=(Z)=>J(`[^${Z.replace(/[-\\^\]]/g,"\\$&")}]`),O=(...Z)=>J(`(?:${Z.map((_)=>W(_)).join("|")})`),U=J("."),G$=J("\\b\\w+\\b"),X$=J("\\w"),B$=J("\\b"),Q=J("\\d"),E$=J("\\s"),v=Object.assign(J("[a-zA-Z]"),{lowercase:J("[a-z]"),uppercase:J("[A-Z]")}),K$=J("\\t"),R$=J("\\n"),H$=J("\\r"),I$={word:J("\\W+"),wordChar:J("\\W"),wordBoundary:J("\\B"),digit:J("\\D"),whitespace:J("\\S"),letter:Object.assign(J("[^a-zA-Z]"),{lowercase:J("[^a-z]"),uppercase:J("[^A-Z]")}),tab:J("[^\\t]"),linefeed:J("[^\\n]"),carriageReturn:J("[^\\r]")};var W=(...Z)=>J(Z.map((_)=>typeof _==="string"?_.replace(Y$,"\\$&"):_).join("")),q=(...Z)=>J(`${b(W(...Z))}+`);var R=(...Z)=>{const _=Z.length>1&&(Array.isArray(Z[Z.length-1])||Z[Z.length-1]instanceof Set)?Z.pop():void 0;return new RegExp(W(...Z).toString(),[..._||""].join(""))};var y=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,p=q(Q).and(W(":")).and(Q.times(2)).and(W(":")).and(Q.times(2)).and(W(".")).and(Q.times(2)),C$=O("Dialogue","Comment").groupedAs("type").and(W(": ")).and(q(Q).optionally().groupedAs("layer")).and(W(",")).and(p.optionally().groupedAs("start")).and(W(",")).and(p.optionally().groupedAs("end")).and(W(",")).and(q(I(",").optionally()).groupedAs("style")).and(W(",")).and(q(I(",")).optionally().groupedAs("actor")).and(W(",")).and(q(Q).optionally().groupedAs("marginLeft")).and(W(",")).and(q(Q).optionally().groupedAs("marginRight")).and(W(",")).and(q(Q).optionally().groupedAs("marginVertical")).and(W(",")).and(q(I(",")).optionally().groupedAs("effect")).and(W(",")).and(q(U).optionally().groupedAs("content")),w=R(C$),b$=W("-").optionally().and(q(Q)),B=b$.and(W(".").and(q(Q)).optionally()),F$=W("\\").and("a").and(q(Q)),H=v.or(Q).times(2),V=W("&H").and(H.groupedAs("color_bgr_blue")).and(H.groupedAs("color_bgr_green")).and(H.groupedAs("color_bgr_red")).and(W("&")),c=W("\\c").and(V),f=W("\\1c").and(W("&H")).and(H.groupedAs("color1_bgr_blue")).and(H.groupedAs("color1_bgr_green")).and(H.groupedAs("color1_bgr_red")).and(W("&")),o=W("\\2c").and(W("&H")).and(H.groupedAs("color2_bgr_blue")).and(H.groupedAs("color2_bgr_green")).and(H.groupedAs("color2_bgr_red")).and(W("&")),n=W("\\3c").and(W("&H")).and(H.groupedAs("color3_bgr_blue")).and(H.groupedAs("color3_bgr_green")).and(H.groupedAs("color3_bgr_red")).and(W("&")),d=W("\\4c").and(W("&H")).and(H.groupedAs("color4_bgr_blue")).and(H.groupedAs("color4_bgr_green")).and(H.groupedAs("color4_bgr_red")).and(W("&")),x=R(V),r=R(c),i=R(f),u=R(o),s=R(n),l=R(d),S$=W("\\").and("alpha").and(q(I("\\"))),M$=W("\\").and("1a").and(q(I("\\"))),O$=W("\\").and("2a").and(q(I("\\"))),U$=W("\\").and("3a").and(q(I("\\"))),v$=W("\\").and("4a").and(q(I("\\"))),h$=W("\\").and("k").and(q(Q)),p$=W("\\").and("K").and(q(Q)),y$=W("\\").and("kf").and(q(Q)),w$=W("\\").and("ko").and(q(Q)),V$=W("\\").and("q").and(q(Q)),c$=W("\\").and("s").and(q(Q)),f$=W("\\").and("u").and(q(Q)),o$=W("\\").and("r").and(q(I("\\"))),n$=W("\\").and("fe").and(q(Q)),d$=W("\\").and("fn").and(q(I("\\"))),x$=W("\\").and("p").and(q(Q)),r$=W("\\").and("pbo").and(q(Q)),i$=W("\\").and("an").and(q(Q)),u$=W("\\").and("b").and(q(Q)),s$=W("\\").and("be").and(q(Q)),l$=W("\\").and("blur").and(q(Q)),N$=W("\\").and("bord").and(q(Q)),T$=W("\\").and("xbord").and(q(Q)),m$=W("\\").and("ybord").and(q(Q)),g$=W("\\").and("shad").and(q(Q)),t$=W("\\").and("xshad").and(q(Q)),e$=W("\\").and("yshad").and(q(Q)),a$=W("\\").and("fax").and(q(Q)),$_=W("\\").and("fay").and(q(Q)),__=W("\\").and("fscx").and(q(Q)),j_=W("\\").and("fscy").and(q(Q)),A_=W("\\").and("fsp").and(q(Q)),Z_=W("\\").and("fr").and(B),k_=W("\\").and("frx").and(B),z_=W("\\").and("fry").and(B),D_=W("\\").and("frz").and(B),W_=W("\\").and("i").and(W("1").or("0")),P_=W("\\").and("fs").and(q(Q)),N=W("\\").and("pos").and(W("(")).and(B.groupedAs("pos_x")).and(W(",")).and(B.groupedAs("pos_y")).and(W(")")),T=R(N),m=W("\\").and("org").and(W("(")).and(B.groupedAs("org_x")).and(W(",")).and(B.groupedAs("org_y")).and(W(")")),g=R(m),t=W("\\").and("fad").and(W("(")).and(B.groupedAs("in")).and(W(",")).and(B.groupedAs("out")).and(W(")")),e=R(t),a=W("\\").and("fade").and(W("(")).and(B.groupedAs("fade_alpha1")).and(W(",")).and(B.groupedAs("fade_alpha2")).and(W(",")).and(B.groupedAs("fade_alpha3")).and(W(",")).and(B.groupedAs("fade_t1")).and(W(",")).and(B.groupedAs("fade_t2")).and(W(",")).and(B.groupedAs("fade_t3")).and(W(",")).and(B.groupedAs("fade_t4")).and(W(")")),$$=R(a),q_=W(",").and(B.groupedAs("move_t1")).and(W(",")).and(B.groupedAs("move_t2")).optionally(),_$=W("\\").and("move").and(W("(")).and(B.groupedAs("move_x1")).and(W(",")).and(B.groupedAs("move_y1")).and(W(",")).and(B.groupedAs("move_x2")).and(W(",")).and(B.groupedAs("move_y2")).and(q_).and(W(")")),j$=R(_$),A$=W("\\").and("clip").and(W("(")).and(q(I(")")).groupedAs("clip_args")).and(W(")")),Z$=R(A$),k$=W("\\").and("iclip").and(W("(")).and(q(I(")")).groupedAs("iclip_args")).and(W(")")),z$=R(k$),D$=s$.or(S$).or(T$).or(m$).or(t$).or(e$).or(k$).or(_$).or(l$).or(N$).or(g$).or(__).or(j_).or(a).or(A$).or(A_).or(N).or(m).or(t).or(r$).or(k_).or(z_).or(D_).or(a$).or($_).or(w$).or(y$).or(Z_).or(P_).or(n$).or(d$).or(i$).or(f).or(o).or(n).or(d).or(M$).or(O$).or(U$).or(v$).or(c).or(V$).or(f$).or(c$).or(x$).or(o$).or(W_).or(u$).or(F$).or(h$).or(p$),L_=W("\\").at.lineStart().and("t").and(W("(")).and(q(Q).groupedAs("arg1").and(W(",")).optionally()).and(q(Q).groupedAs("arg2").and(W(",")).optionally()).and(q(Q).groupedAs("arg3").and(W(",")).optionally()).and(q(D$).groupedAs("tags")).and(W(")")),W$=R(D$),h=R(L_);function S(Z,_){const $=Z.substring(1),A=Z.match(h);if(A&&A[0]){if($.startsWith(k.t)){const z=A[0].match(h)?.groups,D=z?.tags??"",Y=[];S(D,Y);const G=z?.arg1?Number(z.arg1):null,X=z?.arg2?Number(z.arg2):null,E=z?.arg3?Number(z.arg3):null,C={name:k.t,accel:null,t1:null,t2:null,tags:Y};if(G!==null&&X!==null&&E!==null)C.t1=G,C.t2=X,C.accel=E;else if(G!==null&&X!==null&&E===null)C.t1=G,C.t2=X,C.accel=null;else if(G!==null)C.accel=G;_.push(C)}if(Z=Z.substring(A[0].length),Z.length>0)S(Z,_);return _}const j=Z.match(W$);if(!j||!j[0])return _;if($.startsWith(k.move)){const z=j[0].match(j$)?.groups,D=Number(z?.move_x1??"0"),Y=Number(z?.move_y1??"0"),G=Number(z?.move_x2??"0"),X=Number(z?.move_y2??"0"),E=z?.move_t1?Number(z.move_t1):null,C=z?.move_t2?Number(z.move_t2):null,M={name:k.move,x1:D,y1:Y,x2:G,y2:X,t1:E,t2:C};_.push(M)}else if($.startsWith(k.alpha)){const z=j[0].substring(1+k.alpha.length),D={name:k.alpha,value:z};_.push(D)}else if($.startsWith(k.xbord)){const z=Number(j[0].substring(1+k.xbord.length)),D={name:k.xbord,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.ybord)){const z=Number(j[0].substring(1+k.ybord.length)),D={name:k.ybord,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.xshad)){const z=Number(j[0].substring(1+k.xshad.length)),D={name:k.xshad,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.yshad)){const z=Number(j[0].substring(1+k.yshad.length)),D={name:k.yshad,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.iclip)){const D=j[0].match(z$)?.groups?.iclip_args??"",Y={name:k.iclip,drawCommands:D};_.push(Y)}else if($.startsWith(k.blur)){const z=Number(j[0].substring(1+k.blur.length)),D={name:k.blur,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.bord)){const z=Number(j[0].substring(1+k.bord.length)),D={name:k.bord,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.shad)){const z=Number(j[0].substring(1+k.shad.length)),D={name:k.shad,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fscx)){const z=Number(j[0].substring(1+k.fscx.length)),D={name:k.fscx,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fscy)){const z=Number(j[0].substring(1+k.fscy.length)),D={name:k.fscy,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fade)){const z=j[0].match($$)?.groups,D=Number(z?.fade_alpha1??"0"),Y=Number(z?.fade_alpha2??"0"),G=Number(z?.fade_alpha3??"0"),X=Number(z?.fade_t1??"0"),E=Number(z?.fade_t2??"0"),C=Number(z?.fade_t3??"0"),M=Number(z?.fade_t4??"0"),q$={name:k.fade,alpha1:D,alpha2:Y,alpha3:G,t1:X,t2:E,t3:C,t4:M};_.push(q$)}else if($.startsWith(k.clip)){const D=j[0].match(Z$)?.groups?.clip_args??"",Y={name:k.clip,drawCommands:D};_.push(Y)}else if($.startsWith(k.fsp)){const z=Number(j[0].substring(1+k.fsp.length)),D={name:k.fsp,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.pos)){const z=j[0].match(T)?.groups,D=Number(z?.pos_x??"0"),Y=Number(z?.pos_y??"0"),G={name:k.pos,x:D,y:Y};_.push(G)}else if($.startsWith(k.org)){const z=j[0].match(g)?.groups,D=Number(z?.org_x??"0"),Y=Number(z?.org_y??"0"),G={name:k.org,x:D,y:Y};_.push(G)}else if($.startsWith(k.fad)){const z=j[0].match(e)?.groups,D=Number(z?.in??"0"),Y=Number(z?.out??"0"),G={name:k.fad,in:D,out:Y};_.push(G)}else if($.startsWith(k.frx)){const z=Number(j[0].substring(1+k.frx.length)),D={name:k.frx,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fry)){const z=Number(j[0].substring(1+k.fry.length)),D={name:k.fry,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.frz)){const z=Number(j[0].substring(1+k.frz.length)),D={name:k.frz,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fax)){const z=Number(j[0].substring(1+k.fax.length)),D={name:k.fax,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fay)){const z=Number(j[0].substring(1+k.fay.length)),D={name:k.fay,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.pbo)){const z=Number(j[0].substring(1+k.pbo.length)),D={name:k.pbo,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fe)){const z=Number(j[0].substring(1+k.fe.length)),D={name:k.fe,encodingId:Number(z)};_.push(D)}else if($.startsWith(k.fn)){const z=j[0].substring(1+k.fn.length),D={name:k.fn,font:z};_.push(D)}else if($.startsWith(k.an)){const z=Number(j[0].substring(1+k.be.length)),D={name:k.an,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.be)){const z=Number(j[0].substring(1+k.be.length)),D={name:k.be,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fr)){const z=Number(j[0].substring(1+k.fr.length)),D={name:k.fr,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.fs)){const z=Number(j[0].substring(1+k.fs.length)),D={name:k.fs,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.ko)){const z=Number(j[0].substring(1+k.ko.length)),D={name:k.ko,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.kf)){const z=Number(j[0].substring(1+k.kf.length)),D={name:k.kf,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.color1)){const z=j[0].match(i)?.groups,D=Number(K(z?.color1_bgr_blue??"0")),Y=Number(K(z?.color1_bgr_green??"0")),G=Number(K(z?.color1_bgr_red??"0")),X={name:k.color1,blue:D,green:Y,red:G};_.push(X)}else if($.startsWith(k.color2)){const z=j[0].match(u)?.groups,D=Number(K(z?.color2_bgr_blue??"0")),Y=Number(K(z?.color2_bgr_green??"0")),G=Number(K(z?.color2_bgr_red??"0")),X={name:k.color2,blue:D,green:Y,red:G};_.push(X)}else if($.startsWith(k.color3)){const z=j[0].match(s)?.groups,D=Number(K(z?.color3_bgr_blue??"0")),Y=Number(K(z?.color3_bgr_green??"0")),G=Number(K(z?.color3_bgr_red??"0")),X={name:k.color3,blue:D,green:Y,red:G};_.push(X)}else if($.startsWith(k.color4)){const z=j[0].match(l)?.groups,D=Number(K(z?.color4_bgr_blue??"0")),Y=Number(K(z?.color4_bgr_green??"0")),G=Number(K(z?.color4_bgr_red??"0")),X={name:k.color4,blue:D,green:Y,red:G};_.push(X)}else if($.startsWith(k.alpha1)){const z=j[0].substring(1+k.alpha1.length),D={name:k.alpha1,value:z};_.push(D)}else if($.startsWith(k.alpha2)){const z=j[0].substring(1+k.alpha2.length),D={name:k.alpha2,value:z};_.push(D)}else if($.startsWith(k.alpha3)){const z=j[0].substring(1+k.alpha3.length),D={name:k.alpha3,value:z};_.push(D)}else if($.startsWith(k.alpha4)){const z=j[0].substring(1+k.alpha4.length),D={name:k.alpha4,value:z};_.push(D)}else if($.startsWith(k.kLowerCase)){const z=Number(j[0].substring(1+k.kLowerCase.length)),D={name:k.kLowerCase,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.kUpperCase)){const z=Number(j[0].substring(1+k.kUpperCase.length)),D={name:k.kUpperCase,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.q)){const z=Number(j[0].substring(1+k.q.length)),D={name:k.q,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.s)){const z=Number(j[0].substring(1+k.s.length)),D={name:k.s,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.u)){const z=Number(j[0].substring(1+k.u.length)),D={name:k.u,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.r)){const z=j[0].substring(1+k.r.length),D={name:k.r,style:z};_.push(D)}else if($.startsWith(k.p)){const z=Number(j[0].substring(1+k.p.length)),D={name:k.p,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.i)){const z=Number(j[0].substring(1+k.i.length)),D={name:k.i,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.color)){const z=j[0].match(r)?.groups,D=Number(K(z?.color_bgr_blue??"0")),Y=Number(K(z?.color_bgr_green??"0")),G=Number(K(z?.color_bgr_red??"0")),X={name:k.color,blue:D,green:Y,red:G};_.push(X)}else if($.startsWith(k.b)){const z=Number(j[0].substring(1+k.b.length)),D={name:k.b,value:Number.isNaN(z)?0:z};_.push(D)}else if($.startsWith(k.a)){const z=Number(j[0].substring(1+k.a.length)),D={name:k.a,value:Number.isNaN(z)?0:z};_.push(D)}if(Z=Z.substring(j[0].length),Z.length>0)S(Z,_);return _}function p_(Z){const _=[],$=Z.matchAll(y);for(let A of $){if(A.groups?.fx){const j=A.groups.fx.substring(1,A.groups.fx.length-1),z=[];S(j,z),_.push({name:"effect",tags:z});continue}if(A.groups?.txt){_.push({name:"text",value:A.groups?.txt});continue}}return _}function P$(Z){let _="";for(let $ of Z.tags)switch($.name){case k.t:const A={name:"effect",tags:$.tags},j=P$(A);if($.t1!==null&&$.t2!==null&&$.accel!==null)_+=`\\t(${$.t1},${$.t2},${$.accel},${j})`;else if($.t1!==null&&$.t2!==null&&$.accel===null)_+=`\\t(${$.t1},${$.t2},${j})`;else if($.accel!==null)_+=`\\t(${$.accel},${j})`;else _+=`\\t(${j})`;break;case k.pos:case k.org:_+=`\\${$.name}(${$.x},${$.y})`;break;case k.move:if(_+=`\\move(${$.x1},${$.y1},${$.x2},${$.y2}`,$.t1!=null&&$.t2!=null)_+=`,${$.t1},${$.t2}`;_+=")";break;case k.clip:case k.iclip:_+=`\\${$.name}(${$.drawCommands})`;break;case k.fad:_+=`\\fad(${$.in},${$.out})`;break;case k.fade:_+=`\\fade(${$.alpha1},${$.alpha2},${$.alpha3},${$.t1},${$.t2},${$.t3},${$.t4})`;break;case k.fe:_+=`\\fe${$.encodingId}`;break;case k.fn:_+=`\\fn${$.font}`;break;case k.r:_+=`\\r${$.style}`;break;case k.color:case k.color1:case k.color2:case k.color3:case k.color4:const z=F($.blue),D=F($.green),Y=F($.red);_+=`\\${$.name}&H${z}${D}${Y}&`;break;default:_+=`\\${$.name}${$.value}`;break}return _}function y_(Z){let _="";for(let $ of Z){if($.name=="text"){_+=$.value;continue}_+="{"+P$($)+"}"}return _}function w_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.a,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function V_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.b,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function c_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.color,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function f_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.color1,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function o_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.color2,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function n_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.color3,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function d_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.color4,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function x_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.alpha,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function r_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.alpha1,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function i_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.alpha2,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function u_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.alpha3,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function s_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.alpha4,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function l_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.an,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function N_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.be,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function T_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.blur,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function m_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.bord,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function g_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.xbord,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function t_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.ybord,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function e_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.shad,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function a_(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.xshad,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function $j(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.yshad,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function _j(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fr,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function jj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.frx,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Aj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fry,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Zj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.frz,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function kj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fax,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function zj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fay,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Dj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.p,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Wj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.pbo,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Pj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.q,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function qj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.s,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Lj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.u,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Jj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.r,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Qj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fe,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Yj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fn,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Gj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fscx,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Xj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fscy,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Bj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fsp,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Ej(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.kLowerCase,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Kj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.kUpperCase,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Rj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.ko,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Hj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.kf,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Ij(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.i,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Cj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fs,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function bj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.pos,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Fj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.org,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Sj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fad,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Mj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.fade,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Oj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.clip,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function Uj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.iclip,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function vj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.move,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function hj(Z){const _=Z.find((j)=>j.name=="effect");if(_?.name!="effect")return null;const $=k.t,A=_.tags.find((j)=>j.name==$);if(A?.name!=$)return null;return A}function pj(Z,_){const $={name:k.a,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function yj(Z,_){const $={name:k.an,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function wj(Z,_){const $={name:k.b,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function Vj(Z,_,$,A){const j={name:k.color,blue:_,green:$,red:A},[z,D]=L(Z,j.name,j);if(!z)D.blue=_,D.green=$,D.red=A;return D}function cj(Z,_,$,A){const j={name:k.color1,blue:_,green:$,red:A},[z,D]=L(Z,j.name,j);if(!z)D.blue=_,D.green=$,D.red=A;return D}function fj(Z,_,$,A){const j={name:k.color2,blue:_,green:$,red:A},[z,D]=L(Z,j.name,j);if(!z)D.blue=_,D.green=$,D.red=A;return D}function oj(Z,_,$,A){const j={name:k.color3,blue:_,green:$,red:A},[z,D]=L(Z,j.name,j);if(!z)D.blue=_,D.green=$,D.red=A;return D}function nj(Z,_,$,A){const j={name:k.color4,blue:_,green:$,red:A},[z,D]=L(Z,j.name,j);if(!z)D.blue=_,D.green=$,D.red=A;return D}function dj(Z,_){const $={name:k.alpha,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function xj(Z,_){const $={name:k.alpha1,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function rj(Z,_){const $={name:k.alpha2,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function ij(Z,_){const $={name:k.alpha3,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function uj(Z,_){const $={name:k.alpha4,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function sj(Z,_){const $={name:k.blur,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function lj(Z,_){const $={name:k.bord,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function Nj(Z,_){const $={name:k.xbord,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function Tj(Z,_){const $={name:k.ybord,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function mj(Z,_){const $={name:k.fax,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function gj(Z,_){const $={name:k.fay,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function tj(Z,_){const $={name:k.fscx,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function ej(Z,_){const $={name:k.fscy,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function aj(Z,_){const $={name:k.fsp,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function $1(Z,_){const $={name:k.fe,encodingId:_},[A,j]=L(Z,$.name,$);if(!A)j.encodingId=_;return j}function _1(Z,_){const $={name:k.fn,font:_},[A,j]=L(Z,$.name,$);if(!A)j.font=_;return j}function j1(Z,_){const $={name:k.kLowerCase,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function A1(Z,_){const $={name:k.kUpperCase,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function Z1(Z,_){const $={name:k.kf,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function k1(Z,_){const $={name:k.ko,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function z1(Z,_){const $={name:k.p,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function D1(Z,_){const $={name:k.pbo,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function W1(Z,_){const $={name:k.q,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function P1(Z,_){const $={name:k.s,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function q1(Z,_){const $={name:k.shad,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function L1(Z,_){const $={name:k.xshad,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function J1(Z,_){const $={name:k.yshad,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function Q1(Z,_){const $={name:k.u,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function Y1(Z,_){const $={name:k.be,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function G1(Z,_){const $={name:k.fs,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function X1(Z,_){const $={name:k.fr,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function B1(Z,_){const $={name:k.frx,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function E1(Z,_){const $={name:k.fry,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function K1(Z,_){const $={name:k.frz,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function R1(Z,_){const $={name:k.i,value:_},[A,j]=L(Z,$.name,$);if(!A)j.value=_;return j}function H1(Z,_){const $={name:k.r,style:_},[A,j]=L(Z,$.name,$);if(!A)j.style=_;return j}function I1(Z,_,$){const A={name:k.pos,x:_,y:$},[j,z]=L(Z,A.name,A);if(!j)z.x=_,z.y=$;return z}function C1(Z,_,$){const A={name:k.org,x:_,y:$},[j,z]=L(Z,A.name,A);if(!j)z.x=_,z.y=$;return z}function b1(Z,_,$){const A={name:k.fad,in:_,out:$},[j,z]=L(Z,A.name,A);if(!j)z.in=_,z.out=$;return z}function F1(Z,_,$,A,j,z,D,Y){const G={name:k.fade,alpha1:_,alpha2:$,alpha3:A,t1:j,t2:z,t3:D,t4:Y},[X,E]=L(Z,G.name,G);if(!X)E.alpha1=_,E.alpha2=$,E.alpha3=A,E.t1=j,E.t2=z,E.t3=D,E.t4=Y;return E}function S1(Z,_){const $={name:k.clip,drawCommands:_},[A,j]=L(Z,$.name,$);if(!A)j.drawCommands=_;return j}function M1(Z,_){const $={name:k.iclip,drawCommands:_},[A,j]=L(Z,$.name,$);if(!A)j.drawCommands=_;return j}function O1(Z,_,$,A,j,z=null,D=null){const Y={name:k.move,x1:_,y1:$,x2:A,y2:j,t1:z,t2:D},[G,X]=L(Z,Y.name,Y);if(!G)X.x1=_,X.y1=$,X.x2=A,X.y2=j,X.t1=z,X.t2=D;return X}function U1(Z,_,$=null,A=null,j=null){const z={name:k.t,t1:A,t2:j,accel:$,tags:_},[D,Y]=L(Z,z.name,z);if(!D)Y.t1=A,Y.t2=j,Y.accel=$,Y.tags=_;return Y}function v1(Z){return[{name:"effect",tags:Z}]}function h1(Z){const _=Z.find(($)=>$.name==="effect");if(_==null||_.name!="effect")return[];return _.tags}var L=function(Z,_,$){const A=Z.find((z)=>z.name=="effect");if(A?.name!="effect")return Z.unshift({name:"effect",tags:[$]}),[!0,$];const j=A.tags.find((z)=>z.name==_);if(j?.name!=_)return A.tags.push($),[!0,$];return[!1,j]};function p1(Z,_){const $=Z.find((j)=>j.name=="effect");if($?.name!="effect")return;const A=$.tags.findIndex((j)=>j.name===_);if(A<0)return;$.tags.splice(A,1)}function y1(Z){const _=Z.match(w);if(_==null)return null;const $=_.groups;return{type:$?.type??"",layer:Number($?.layer??"0"),start:$?.start??"",end:$?.end??"",style:$?.style??"",actor:$?.actor??"",marginLeft:Number($?.marginLeft??"0"),marginRight:Number($?.marginRight??"0"),marginVertical:Number($?.marginVertical??"0"),effect:$?.effect??"",content:$?.content??""}}function w1(Z){let _=Z.type;return _+=": ",_+=Z.layer,_+=",",_+=Z.start,_+=",",_+=Z.end,_+=",",_+=Z.style,_+=",",_+=Z.actor,_+=",",_+=Z.marginLeft,_+=",",_+=Z.marginRight,_+=",",_+=Z.marginVertical,_+=",",_+=Z.effect,_+=",",_+=Z.content,_}function V1(Z){const _=Z.match(x);if(_==null)return null;const $=_.groups;return{blue:K($?.color_bgr_blue??""),green:K($?.color_bgr_green??""),red:K($?.color_bgr_red??"")}}var k;(function(P){P["a"]="a";P["alpha"]="alpha";P["alpha1"]="1a";P["alpha2"]="2a";P["alpha3"]="3a";P["alpha4"]="4a";P["an"]="an";P["b"]="b";P["be"]="be";P["blur"]="blur";P["bord"]="bord";P["clip"]="clip";P["color"]="c";P["color1"]="1c";P["color2"]="2c";P["color3"]="3c";P["color4"]="4c";P["fad"]="fad";P["fade"]="fade";P["fax"]="fax";P["fay"]="fay";P["fe"]="fe";P["fn"]="fn";P["fr"]="fr";P["frx"]="frx";P["fry"]="fry";P["frz"]="frz";P["fs"]="fs";P["fscx"]="fscx";P["fscy"]="fscy";P["fsp"]="fsp";P["i"]="i";P["iclip"]="iclip";P["kLowerCase"]="k";P["kUpperCase"]="K";P["kf"]="kf";P["ko"]="ko";P["move"]="move";P["org"]="org";P["p"]="p";P["pbo"]="pbo";P["pos"]="pos";P["q"]="q";P["r"]="r";P["s"]="s";P["shad"]="shad";P["t"]="t";P["u"]="u";P["xbord"]="xbord";P["xshad"]="xshad";P["ybord"]="ybord";P["yshad"]="yshad"})(k||(k={}));export{v1 as tagsToItems,J1 as setYshad,Tj as setYbord,L1 as setXshad,Nj as setXbord,Q1 as setU,U1 as setT,q1 as setShad,P1 as setS,H1 as setR,W1 as setQ,I1 as setPos,D1 as setPbo,z1 as setP,C1 as setOrg,O1 as setMove,k1 as setKo,Z1 as setKf,A1 as setKUpperCase,j1 as setKLowerCase,M1 as setIclip,R1 as setI,aj as setFsp,ej as setFscy,tj as setFscx,G1 as setFs,K1 as setFrz,E1 as setFry,B1 as setFrx,X1 as setFr,_1 as setFn,$1 as setFe,gj as setFay,mj as setFax,F1 as setFade,b1 as setFad,nj as setColor4,oj as setColor3,fj as setColor2,cj as setColor1,Vj as setColor,S1 as setClip,lj as setBord,sj as setBlur,Y1 as setBe,wj as setB,yj as setAn,uj as setAlpha4,ij as setAlpha3,rj as setAlpha2,xj as setAlpha1,dj as setAlpha,pj as setA,p1 as removeTag,S as parseTags,y1 as parseLine,p_ as parseContent,V1 as parseColorBGR,F as numberToHex,w1 as lineToString,h1 as itemsToTags,J_ as interpolate,K as hexToNumber,$j as findYshad,t_ as findYbord,a_ as findXshad,g_ as findXbord,Lj as findU,hj as findT,e_ as findShad,qj as findS,Jj as findR,Pj as findQ,bj as findPos,Wj as findPbo,Dj as findP,Fj as findOrg,vj as findMove,Rj as findKo,Hj as findKf,Kj as findKUpperCase,Ej as findKLowerCase,Uj as findIclip,Ij as findI,Bj as findFsp,Xj as findFscy,Gj as findFscx,Cj as findFs,Zj as findFrz,Aj as findFry,jj as findFrx,_j as findFr,Yj as findFn,Qj as findFe,zj as findFay,kj as findFax,Mj as findFade,Sj as findFad,d_ as findColor4,n_ as findColor3,o_ as findColor2,f_ as findColor1,c_ as findColor,Oj as findClip,m_ as findBord,T_ as findBlur,N_ as findBe,V_ as findB,l_ as findAn,s_ as findAlpha4,u_ as findAlpha3,i_ as findAlpha2,r_ as findAlpha1,x_ as findAlpha,w_ as findA,y_ as contentsToString,P$ as contentEffectToString,k as TagName};

//# debugId=B5ADC303962224CB64756e2164756e21
